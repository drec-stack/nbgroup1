/* animations.css - ПОЛНЫЙ ФАЙЛ АНИМАЦИЙ С EXPERTISE */

:root {
    --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-in-out-quad: cubic-bezier(0.455, 0.03, 0.515, 0.955);
    --ease-out-back: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
    
    --animation-duration-fast: 0.3s;
    --animation-duration-normal: 0.6s;
    --animation-duration-slow: 1s;
    
    --speck-blue: #0066ff;
    --speck-blue-light: #66b5ff;
    --speck-blue-dark: #0052cc;
}

/* ===== БАЗОВЫЕ АНИМАЦИОННЫЕ СТИЛИ ===== */
* {
    animation-duration: var(--animation-duration-normal);
    animation-fill-mode: both;
}

/* ===== EXPERTISE BLOCK ANIMATIONS ===== */
@keyframes expertiseBlockReveal {
    0% {
        opacity: 0;
        transform: translateY(50px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.expertise-block.fade-in-up {
    animation: expertiseBlockReveal 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes expertiseNumberGlow {
    0%, 100% {
        text-shadow: 
            0 2px 20px rgba(0, 102, 255, 0.5),
            0 1px 15px rgba(0, 102, 255, 0.3);
    }
    50% {
        text-shadow: 
            0 3px 30px rgba(0, 102, 255, 0.8),
            0 2px 25px rgba(0, 102, 255, 0.5);
    }
}

.expertise-block:hover .expertise-number {
    animation: expertiseNumberGlow 2s ease-in-out infinite;
}

@keyframes expertiseBlockHover {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(-10px);
    }
}

.expertise-block:hover {
    animation: expertiseBlockHover 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes featureArrowMove {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(5px);
    }
}

.expertise-block:hover .expertise-features li::before {
    animation: featureArrowMove 0.3s ease forwards;
}

/* ===== HERO АНИМАЦИИ ===== */
@keyframes heroContentReveal {
    0% {
        opacity: 0;
        transform: translateY(40px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero .hero-content > * {
    animation: heroContentReveal 0.8s ease forwards;
}

.hero h1 { animation-delay: 0.2s; }
.hero-subtitle { animation-delay: 0.4s; }
.hero-description { animation-delay: 0.6s; }
.hero-image { animation-delay: 0.8s; }
.hero-actions { animation-delay: 1s; }

@keyframes heroImageGlow {
    0%, 100% {
        box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.5),
            0 10px 30px rgba(0, 102, 255, 0.3);
    }
    50% {
        box-shadow: 
            0 30px 60px rgba(0, 0, 0, 0.6),
            0 15px 40px rgba(0, 102, 255, 0.4),
            0 0 80px rgba(0, 102, 255, 0.2);
    }
}

.hero-image:hover {
    animation: heroImageGlow 3s ease-in-out infinite;
}

/* ===== SPECK BLOCKS АНИМАЦИИ ===== */
@keyframes speckBlockReveal {
    0% {
        opacity: 0;
        transform: translateY(60px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.speck-vertical-block {
    animation: speckBlockReveal 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    animation-play-state: paused;
}

@keyframes speckNumberAppear {
    0% {
        opacity: 0;
        transform: translateX(-30px) scale(0.8);
    }
    60% {
        opacity: 1;
        transform: translateX(10px) scale(1.1);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes speckNumberGlow {
    0%, 100% {
        text-shadow: 
            0 0 15px rgba(0, 102, 255, 0.4),
            0 0 30px rgba(0, 102, 255, 0.2);
    }
    50% {
        text-shadow: 
            0 0 25px rgba(0, 102, 255, 0.8),
            0 0 50px rgba(0, 102, 255, 0.4);
    }
}

.speck-block-number {
    animation: 
        speckNumberAppear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
        speckNumberGlow 3s ease-in-out infinite 0.8s;
    animation-play-state: paused;
}

@keyframes speckTitleAppear {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.speck-block-title {
    animation: speckTitleAppear 0.8s ease 0.2s forwards;
    animation-play-state: paused;
}

@keyframes speckSubtitleAppear {
    0% {
        opacity: 0;
        transform: translateY(15px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.speck-block-subtitle {
    animation: speckSubtitleAppear 0.8s ease 0.4s forwards;
    animation-play-state: paused;
}

@keyframes speckUnderlineExpand {
    0% {
        width: 0;
    }
    100% {
        width: 120px;
    }
}

.speck-block-subtitle::after {
    animation: speckUnderlineExpand 0.8s ease 0.8s forwards;
    animation-play-state: paused;
}

@keyframes speckFeatureItemAppear {
    0% {
        opacity: 0;
        transform: translateX(-20px);
    }
    60% {
        opacity: 1;
        transform: translateX(5px);
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

.speck-feature-item {
    animation: speckFeatureItemAppear 0.6s ease forwards;
    animation-play-state: paused;
}

.speck-feature-item:nth-child(1) { animation-delay: 0.1s; }
.speck-feature-item:nth-child(2) { animation-delay: 0.2s; }
.speck-feature-item:nth-child(3) { animation-delay: 0.3s; }
.speck-feature-item:nth-child(4) { animation-delay: 0.4s; }

@keyframes speckColumnHover {
    0% {
        transform: translateY(0) scale(1);
    }
    100% {
        transform: translateY(-15px) scale(1.02);
    }
}

.speck-feature-column:hover {
    animation: speckColumnHover 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes speckArrowPulse {
    0%, 100% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(5px);
    }
}

.speck-feature-item:hover .speck-feature-icon {
    animation: speckArrowPulse 1s infinite;
}

@keyframes speckColumnTitleHover {
    0% {
        transform: translateX(0);
        color: rgba(255, 255, 255, 0.98);
    }
    100% {
        transform: translateX(10px);
        color: #ffffff;
    }
}

.speck-feature-column:hover .speck-column-title {
    animation: speckColumnTitleHover 0.3s ease forwards;
}

/* ===== PROJECTS АНИМАЦИИ ===== */
@keyframes projectCardReveal {
    0% {
        opacity: 0;
        transform: translateY(40px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.project-card.fade-in-up {
    animation: projectCardReveal 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes projectImageHover {
    0% {
        transform: scale(1);
    }
    100% {
        transform: scale(1.1);
    }
}

.project-card:hover .project-image img {
    animation: projectImageHover 0.8s ease forwards;
}

@keyframes projectCardLift {
    0% {
        transform: translateY(0);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }
    100% {
        transform: translateY(-15px);
        box-shadow: 
            0 30px 60px rgba(0, 0, 0, 0.5),
            0 15px 40px rgba(0, 102, 255, 0.2);
    }
}

.project-card:hover {
    animation: projectCardLift 0.4s ease forwards;
}

/* ===== SERVICES АНИМАЦИИ ===== */
@keyframes serviceItemReveal {
    0% {
        opacity: 0;
        transform: translateY(30px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.service-item.fade-in-up {
    animation: serviceItemReveal 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes serviceIconPulse {
    0%, 100% {
        transform: scale(1);
        text-shadow: 
            0 2px 20px rgba(0, 102, 255, 0.7),
            0 1px 15px rgba(0, 102, 255, 0.5);
    }
    50% {
        transform: scale(1.1);
        text-shadow: 
            0 3px 25px rgba(0, 102, 255, 0.9),
            0 2px 20px rgba(0, 102, 255, 0.7);
    }
}

.service-item:hover .service-icon {
    animation: serviceIconPulse 1s ease-in-out infinite;
}

@keyframes serviceItemLift {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(-10px);
    }
}

.service-item:hover {
    animation: serviceItemLift 0.3s ease forwards;
}

/* ===== JOURNALS АНИМАЦИИ ===== */
@keyframes journalItemReveal {
    0% {
        opacity: 0;
        transform: translateX(-20px);
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

.journal-item.fade-in-up {
    animation: journalItemReveal 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes journalLinkHover {
    0% {
        gap: 8px;
        color: #66b5ff;
    }
    100% {
        gap: 12px;
        color: #99ccff;
    }
}

.journal-link:hover {
    animation: journalLinkHover 0.3s ease forwards;
}

@keyframes journalItemSlide {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(10px);
    }
}

.journal-item:hover {
    animation: journalItemSlide 0.3s ease forwards;
}

/* ===== FAQ АНИМАЦИИ ===== */
@keyframes faqItemReveal {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.faq-item.fade-in-up {
    animation: faqItemReveal 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes faqAnswerExpand {
    0% {
        max-height: 0;
        opacity: 0;
        padding-top: 0;
        padding-bottom: 0;
    }
    100% {
        max-height: 500px;
        opacity: 1;
        padding-top: 25px;
        padding-bottom: 25px;
    }
}

.faq-item.active .faq-answer {
    animation: faqAnswerExpand 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes faqIconRotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(45deg);
    }
}

.faq-item.active .faq-question i {
    animation: faqIconRotate 0.3s ease forwards;
}

@keyframes faqQuestionHover {
    0% {
        color: rgba(255, 255, 255, 0.98);
        border-bottom-color: rgba(255, 255, 255, 0.1);
    }
    100% {
        color: #66b5ff;
        border-bottom-color: rgba(0, 102, 255, 0.3);
    }
}

.faq-question:hover {
    animation: faqQuestionHover 0.3s ease forwards;
}

/* ===== STATS АНИМАЦИИ ===== */
@keyframes statCardReveal {
    0% {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.stat-card.animated-element {
    animation: statCardReveal 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-play-state: paused;
}

@keyframes counterIncrement {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}

.stat-number {
    transition: transform 0.3s ease;
}

.stat-number.animating {
    animation: counterIncrement 0.5s ease;
}

/* ===== CTA АНИМАЦИИ ===== */
@keyframes ctaReveal {
    0% {
        opacity: 0;
        transform: translateY(40px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.cta-title.fade-in-down,
.cta-subtitle.fade-in-up,
.cta-image.fade-in-up,
.cta-actions.fade-in-up {
    animation-play-state: paused;
}

@keyframes ctaImageGlow {
    0%, 100% {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }
    50% {
        box-shadow: 
            0 25px 50px rgba(0, 0, 0, 0.5),
            0 10px 30px rgba(0, 102, 255, 0.3);
    }
}

.cta-image:hover {
    animation: ctaImageGlow 3s ease-in-out infinite;
}

/* ===== BUTTON АНИМАЦИИ ===== */
@keyframes buttonShimmer {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

.btn::before {
    animation: buttonShimmer 0.7s ease;
}

@keyframes buttonHover {
    0% {
        transform: translateY(0);
        box-shadow: 0 10px 30px rgba(0, 102, 255, 0.3);
    }
    100% {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(0, 102, 255, 0.4);
    }
}

.btn-primary:hover {
    animation: buttonHover 0.3s ease forwards;
}

@keyframes buttonArrowMove {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(5px);
    }
}

.btn:hover i {
    animation: buttonArrowMove 0.3s ease forwards;
}

/* ===== SCROLL PROGRESS ===== */
@keyframes progressGrow {
    0% {
        width: 0;
    }
    100% {
        width: var(--progress-width, 100%);
    }
}

.scroll-progress-bar {
    animation: progressGrow 0.3s ease;
}

/* ===== FADE ANIMATIONS ===== */
.fade-in {
    opacity: 0;
    animation: fadeIn 0.8s var(--ease-out-quad) forwards;
}

.fade-in-delay {
    opacity: 0;
    animation: fadeIn 0.8s var(--ease-out-quad) 0.3s forwards;
}

@keyframes fadeIn {
    to {
        opacity: 1;
    }
}

.fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s var(--ease-out-quad) forwards;
    animation-play-state: paused;
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in-down {
    opacity: 0;
    transform: translateY(-30px);
    animation: fadeInDown 0.8s var(--ease-out-quad) forwards;
    animation-play-state: paused;
}

@keyframes fadeInDown {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in-left {
    opacity: 0;
    transform: translateX(-50px);
    animation: fadeInLeft 0.8s var(--ease-out-quad) forwards;
    animation-play-state: paused;
}

@keyframes fadeInLeft {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.fade-in-right {
    opacity: 0;
    transform: translateX(50px);
    animation: fadeInRight 0.8s var(--ease-out-quad) forwards;
    animation-play-state: paused;
}

@keyframes fadeInRight {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ===== DELAY CLASSES ===== */
.delay-100 { animation-delay: 0.1s; }
.delay-200 { animation-delay: 0.2s; }
.delay-300 { animation-delay: 0.3s; }
.delay-400 { animation-delay: 0.4s; }
.delay-500 { animation-delay: 0.5s; }
.delay-600 { animation-delay: 0.6s; }
.delay-700 { animation-delay: 0.7s; }
.delay-800 { animation-delay: 0.8s; }
.delay-900 { animation-delay: 0.9s; }
.delay-1000 { animation-delay: 1s; }

/* ===== ANIMATION CONTROL CLASSES ===== */
.animation-paused {
    animation-play-state: paused !important;
}

.animation-running {
    animation-play-state: running !important;
}

.animation-none {
    animation: none !important;
}

/* ===== PULSE & GLOW EFFECTS ===== */
@keyframes pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
}

.pulse {
    animation: pulse 2s var(--ease-in-out-quad) infinite;
}

@keyframes pulseGlow {
    0%, 100% {
        box-shadow: 0 0 20px rgba(0, 102, 255, 0.3);
    }
    50% {
        box-shadow: 0 0 40px rgba(0, 102, 255, 0.6);
    }
}

.pulse-glow {
    animation: pulseGlow 3s var(--ease-in-out-quad) infinite;
}

@keyframes glow {
    0% {
        filter: drop-shadow(0 0 10px rgba(0, 102, 255, 0.5));
    }
    100% {
        filter: drop-shadow(0 0 20px rgba(0, 102, 255, 0.8));
    }
}

.glow {
    animation: glow 2s var(--ease-in-out-quad) infinite alternate;
}

/* ===== TEXT SHADOW ANIMATIONS ===== */
@keyframes textShadowPulse {
    0%, 100% {
        text-shadow: 
            0 2px 20px rgba(0, 0, 0, 0.9),
            0 1px 15px rgba(0, 0, 0, 0.8);
    }
    50% {
        text-shadow: 
            0 3px 30px rgba(0, 0, 0, 0.95),
            0 2px 25px rgba(0, 0, 0, 0.9);
    }
}

.text-shadow-pulse {
    animation: textShadowPulse 3s ease-in-out infinite;
}

/* ===== ACCESSIBILITY & PERFORMANCE ===== */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    /* Отключаем все анимации */
    .fade-in-down, .fade-in-up, .fade-in-left, .fade-in-right,
    .expertise-block, .expertise-number,
    .speck-vertical-block, .speck-block-number, .speck-block-title,
    .speck-block-subtitle, .speck-feature-item, .project-card,
    .service-item, .journal-item, .faq-item, .stat-card,
    .hero-image, .cta-image, .btn, .btn::before,
    .pulse, .pulse-glow, .glow, .text-shadow-pulse {
        animation: none !important;
        transition: none !important;
    }
    
    /* Устанавливаем конечные состояния */
    .fade-in-down, .fade-in-up, .fade-in-left, .fade-in-right,
    .expertise-block, .speck-vertical-block, .project-card, .service-item,
    .journal-item, .faq-item, .stat-card {
        opacity: 1 !important;
        transform: none !important;
    }
    
    .expertise-block.visible,
    .speck-vertical-block.visible {
        opacity: 1 !important;
        transform: none !important;
    }
    
    /* Отключаем hover эффекты */
    .expertise-block:hover,
    .hero-image:hover,
    .project-card:hover,
    .service-item:hover,
    .journal-item:hover,
    .faq-question:hover,
    .btn:hover,
    .speck-feature-column:hover,
    .speck-feature-item:hover .speck-feature-icon,
    .speck-feature-column:hover .speck-column-title {
        animation: none !important;
        transform: none !important;
    }
    
    /* Убираем тени текста для уменьшения нагрузки */
    .hero h1,
    .hero-subtitle,
    .hero-description p,
    .expertise-title,
    .expertise-subtitle,
    .expertise-features li,
    .speck-block-title,
    .speck-block-subtitle,
    .speck-column-title,
    .speck-feature-item,
    .project-title,
    .project-description,
    .service-title,
    .service-description,
    .journal-title,
    .faq-question,
    .faq-answer p,
    .cta-title,
    .cta-subtitle,
    .stat-number,
    .stat-label,
    .section-title,
    .section-subtitle {
        text-shadow: none !important;
    }
    
    /* Фиксируем FAQ в открытом состоянии */
    .faq-item .faq-answer {
        max-height: none !important;
        opacity: 1 !important;
        padding: 25px 30px !important;
    }
    
    .faq-question i {
        transform: rotate(45deg) !important;
    }
    
    /* Критичный фикс для переключения языка */
    [data-i18n] {
        opacity: 1 !important;
        transition: none !important;
        animation: none !important;
    }
}

/* КРИТИЧНЫЙ ФИКС: УБИРАЕМ ПРОЗРАЧНОСТЬ ТЕКСТА ПРИ ПЕРЕКЛЮЧЕНИИ ЯЗЫКА */
.home-page [data-i18n] {
    opacity: 1 !important;
    transition: none !important;
}

.home-page.language-changing [data-i18n],
.home-page.language-changed [data-i18n] {
    opacity: 1 !important;
    transition: none !important;
    animation: none !important;
}

/* ФИКС ДЛЯ ВИСЯЩЕГО ТЕКСТА */
.expertise-block,
.speck-vertical-block,
.project-card,
.service-item,
.journal-item,
.faq-item,
.cta-content,
.stat-card,
.hero-description {
    background: transparent !important;
    backdrop-filter: none !important;
    border: none !important;
    box-shadow: none !important;
}

/* УСИЛЕНИЕ ТЕНИ ДЛЯ ВИСЯЩЕГО ТЕКСТА */
.expertise-title,
.expertise-subtitle,
.expertise-features li,
.speck-block-title,
.speck-block-subtitle,
.speck-column-title,
.speck-feature-item,
.project-title,
.project-description,
.service-title,
.service-description,
.journal-title,
.journal-date,
.faq-question,
.faq-answer p,
.cta-title,
.cta-subtitle,
.stat-number,
.stat-label,
.section-title,
.section-subtitle,
.hero h1,
.hero-subtitle,
.hero-description p {
    text-shadow: 
        0 3px 30px rgba(0, 0, 0, 0.95),
        0 2px 25px rgba(0, 0, 0, 0.9),
        0 1px 20px rgba(0, 0, 0, 0.85) !important;
    position: relative;
    z-index: 20;
}

/* АНИМАЦИЯ ЗАГРУЗКИ */
@keyframes loadingFade {
    0% {
        opacity: 0.3;
    }
    50% {
        opacity: 1;
    }
    100% {
        opacity: 0.3;
    }
}

.loading {
    animation: loadingFade 1.5s ease-in-out infinite;
}

/* FINAL STATE CLASSES */
.animated-element.visible,
.fade-in-down.animated,
.fade-in-up.animated,
.fade-in-left.animated,
.fade-in-right.animated {
    animation-play-state: running !important;
}

/* SPECK ANIMATIONS READY STATE */
.speck-animations-ready .speck-vertical-block,
.speck-animations-ready .expertise-block,
.speck-animations-ready .project-card,
.speck-animations-ready .service-item,
.speck-animations-ready .journal-item,
.speck-animations-ready .faq-item {
    will-change: transform, opacity;
}
